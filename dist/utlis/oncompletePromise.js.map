{"version":3,"sources":["../../src/utlis/oncompletePromise.js"],"names":["promiseGenerator","request","successMessage","data","Promise","resolve","reject","onsuccess","successData","property","success","onerror","fail","error","transaction","oncomplete"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,mBAAmB;AACvBC,SADuB,mBACfA,QADe,EACNC,cADM,EACUC,IADV,EACgB;AACrC,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCL,eAAQM,SAAR,GAAoB,YAAM;AACxB,YAAIC,cAAcL,IAAlB;;AAEA,YAAIA,KAAKM,QAAT,EAAmB;AACjBD,wBAAcP,SAAQE,KAAKM,QAAb,CAAd,CADiB,CACqB;AACvC;AACD,sBAAIC,OAAJ,CAAYR,cAAZ;AACAG,gBAAQG,WAAR;AACD,OARD;AASAP,eAAQU,OAAR,GAAkB,YAAM;AACtB,sBAAIC,IAAJ,CAASX,SAAQY,KAAjB;AACAP;AACD,OAHD;AAID,KAdM,CAAP;AAeD,GAjBsB;AAkBvBQ,aAlBuB,uBAkBXA,YAlBW,EAkBEZ,cAlBF,EAkBkB;AACvC,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCQ,mBAAYC,UAAZ,GAAyB,YAAM;AAC7B,sBAAIL,OAAJ,CAAYR,cAAZ;AACAG;AACD,OAHD;AAIAS,mBAAYH,OAAZ,GAAsB,YAAM;AAC1BL;AACD,OAFD;AAGD,KARM,CAAP;AASD;AA5BsB,CAAzB;;kBA+BeN,gB","file":"oncompletePromise.js","sourcesContent":["import log from './log';\n\nconst promiseGenerator = {\n  request(request, successMessage, data) {\n    return new Promise((resolve, reject) => {\n      request.onsuccess = () => {\n        let successData = data;\n\n        if (data.property) {\n          successData = request[data.property]; // for getItem\n        }\n        log.success(successMessage);\n        resolve(successData);\n      };\n      request.onerror = () => {\n        log.fail(request.error);\n        reject();\n      };\n    });\n  },\n  transaction(transaction, successMessage) {\n    return new Promise((resolve, reject) => {\n      transaction.oncomplete = () => {\n        log.success(successMessage);\n        resolve();\n      };\n      transaction.onerror = () => {\n        reject();\n      };\n    });\n  },\n};\n\nexport default promiseGenerator;\n"]}